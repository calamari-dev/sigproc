\NeedsTeXFormat{LaTeX2e}
\RequirePackage{expl3}
\ProvidesExplPackage{sigproc-math}{2023-02-01}{1.0}{nomenclature of the signal processing}
\ExplSyntaxOff

\RequirePackage{mathtools}
\RequirePackage[group-digits=none]{siunitx}
\ProvideDocumentCommand{\narrowbaselines}{}{}

% 汎用
\NewDocumentCommand{\holder}{}{\mathvisiblespace}
\NewDocumentCommand{\operateur}{m}{\mathop{\kern\z@ #1}\nolimits}
\NewDocumentCommand{\pholder}{}{(\holder)}

% 算術・代数
\NewDocumentCommand{\conj}{s m}{\IfBooleanTF{#1}{\overline{#2}}{\bar{#2}}}
\NewDocumentCommand{\mapset}{m m}{#2^{#1}}
\NewDocumentCommand{\numset}{m}{\symbb{#1}}
\NewDocumentCommand{\powerset}{m}{2^{#1}}
\NewDocumentCommand{\scomp}{m}{#1^{\symrm{c}}}
\NewDocumentCommand{\sizeof}{m}{\mathoctothorpe #1}

\DeclareMathOperator{\ipart}{Im}
\DeclareMathOperator{\rpart}{Re}

\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\bqty}{\lbrack}{\rbrack}
\DeclarePairedDelimiter{\Bqty}{\lbrace}{\rbrace}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiterXPP{\inv}[2]{#1^{-1}}{\lbrack}{\rbrack}{}{#2}
\DeclarePairedDelimiter{\pqty}{\lparen}{\rparen}
\DeclarePairedDelimiterXPP{\ran}[2]{#1}{\lbrack}{\rbrack}{}{#2}
\DeclarePairedDelimiter{\seq}{\lbrace}{\rbrace}

\providecommand{\given}{}
\newcommand{\SetSymbol}[1][]{\nonscript\:#1\vert\allowbreak\nonscript\:\mathopen{}}
\DeclarePairedDelimiterX{\Set}[1]{\lbrace}{\rbrace}{\renewcommand{\given}{\SetSymbol[\delimsize]}#1}

% 線形代数
\NewDocumentCommand{\basis}{m}{\symscr{#1}}
\NewDocumentCommand{\htrps}{m}{#1^{\symsfup{H}}}
\NewDocumentCommand{\rowvect}{m}{({\narrowbaselines\begin{matrix}#1\end{matrix}})}
\NewDocumentCommand{\kdelta}{m m}{\symrm{\delta}_{#1\,#2}}
\NewDocumentCommand{\mat}{m}{\symbf{#1}}
\NewDocumentCommand{\midx}{m m m}{#1_{#2\,#3}}
\NewDocumentCommand{\pcomp}{o m}{#2^{\mathord{\perp}\IfValueT{#1}{\mid #1}}}
\NewDocumentCommand{\pinv}{m}{#1^{\mathord{+}}}
\NewDocumentCommand{\smallmatrice}{m}{\begin{psmallmatrix}#1\end{psmallmatrix}}
\NewDocumentCommand{\trps}{m}{#1^{\symsfup{T}}}
\NewDocumentCommand{\vect}{m}{\symbf{#1}}

\DeclareMathOperator{\colsp}{col}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\img}{im}
\DeclareMathOperator{\nulsp}{nul}
\DeclareMathOperator{\proj}{proj}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\spannedby}{span}
\DeclareMathOperator{\spec}{spec}
\DeclareMathOperator{\trace}{tr}

\DeclarePairedDelimiterXPP{\fnorm}[1]{}{\lVert}{\rVert}{_{\symrm{F}}}{#1}
\DeclarePairedDelimiterX{\innerp}[2]{\langle}{\rangle}{#1,#2}
\DeclarePairedDelimiter{\matfence}{\lparen}{\rparen}
\DeclarePairedDelimiterX{\matrice}[1]{\lparen}{\rparen}{\begin{matrix}#1\end{matrix}}
\DeclarePairedDelimiter{\mnorm}{\lVert}{\rVert}
\DeclarePairedDelimiter{\vnorm}{\lVert}{\rVert}

% 微分積分
\NewDocumentCommand{\diff}{s m m}{\IfBooleanTF{#1}{\frac{\symrm{d}}{\symrm{d}#3}#2}{\frac{\symrm{d}#2}{\symrm{d}#3}}}
\NewDocumentCommand{\difs}{s m m}{\IfBooleanTF{#1}{(\symrm{d}/\symrm{d}#3)#2}{\symrm{d}#2/\symrm{d}#3}}
\NewDocumentCommand{\diffp}{s m m}{\IfBooleanTF{#1}{\frac{\partial}{\partial #3}#2}{\frac{\partial #2}{\partial #3}}}
\NewDocumentCommand{\difsp}{s m m}{\IfBooleanTF{#1}{(\partial/\partial #3)#2}{\partial #2/\partial #3}}
\NewDocumentCommand{\intd}{s o m}{\IfBooleanF{#1}{\,}\IfValueTF{#2}{\symrm{d}^{#2}}{\symrm{d}}#3}

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator{\gradof}{\mathbfup{grad}}
\DeclareMathOperator{\order}{o}
\DeclareMathOperator{\Order}{O}

\DeclarePairedDelimiterX{\ccival}[2]{\lbrack}{\rbrack}{#1,#2}
\DeclarePairedDelimiterX{\coival}[2]{\lbrack}{\rparen}{#1,#2}
\DeclarePairedDelimiterX{\ocival}[2]{\lparen}{\rbrack}{#1,#2}
\DeclarePairedDelimiterX{\ooival}[2]{\lparen}{\rparen}{#1,#2}

% 関数解析
\NewDocumentCommand{\cont}{m}{C^{#1}}
\NewDocumentCommand{\lebesgue}{m}{\ell^{#1}}
\NewDocumentCommand{\Lebesgue}{s m}{\IfBooleanTF{#1}{\symscr{L}}{L}^{#2}}
\NewDocumentCommand{\torus}{}{\symbb{T}}

\DeclareMathOperator{\clsr}{cl}
\DeclareMathOperator*{\sqlim}{l{.}i{.}m{.}}

\DeclarePairedDelimiterXPP{\lpnorm}[2]{}{\lVert}{\rVert}{_{#1}}{#2}
\DeclarePairedDelimiterXPP{\Lpnorm}[2]{}{\lVert}{\rVert}{_{#1}}{#2}
\DeclarePairedDelimiterXPP{\Lpseminorm}[2]{}{\lVert}{\rVert}{_{\Lebesgue*{#1}}}{#2}

% フレーム理論
\NewDocumentCommand{\synth}{m}{#1^{\mathord{\ast}}}

% 時間周波数解析
\NewDocumentCommand{\circconv}{}{\ast}
\NewDocumentCommand{\comb}{}{\mathord{\mathrm{Ш}}}
\NewDocumentCommand{\cycles}{m}{\ell^2(\numset{Z}_{#1})}
\NewDocumentCommand{\dft}{s m}{\operateur{\symscr{F}_{\:\numset{Z}/#2}\IfBooleanT{#1}{^{-1}}}}
\NewDocumentCommand{\dgt}{o m}{\operateur{\symscr{G}_{#2}\IfValueT{#1}{^{(#1)}}}}
\NewDocumentCommand{\doublecycles}{o m}{\ell^2(\IfValueTF{#1}{\numset{Z}_{#1}\times\numset{Z}_{#2}}{\numset{Z}_{#2}^2})}
\NewDocumentCommand{\dtft}{}{\operateur{\symscr{F}_{\:\numset{Z}}}}
\NewDocumentCommand{\gaborsys}{m m m}{\symscr{G}(#1;#2,#3)}
\NewDocumentCommand{\modulate}{o m}{\operateur{\symscr{M}_{#2}\IfValueT{#1}{^{(#1)}}}}
\NewDocumentCommand{\fseries}{}{\operateur{\symscr{F}_{\:\torus}}}
\NewDocumentCommand{\ftrans}{}{\operateur{\symscr{F}}}
\NewDocumentCommand{\lagop}{}{\operateur{\symit{L}}}
\NewDocumentCommand{\stft}{o m}{\operateur{\symscr{V}_{#2}\IfValueT{#1}{^{(#1)}}}}
\NewDocumentCommand{\translate}{m}{\operateur{\symscr{T}_{#1}}}

% 測度論
\NewDocumentCommand{\almosteverywhere}{o o}{\allowbreak\;\IfValueT{#1}{\IfBlankF{#1}{#1\mathhyphen}}\mathrm{a{.}e{.}}\IfValueT{#2}{\;#2}}
\NewDocumentCommand{\borelset}{m}{\symscr{B}(#1)}
\NewDocumentCommand{\extendedreal}{}{\bar{\numset{R}}}
\NewDocumentCommand{\indicator}{}{\symbb{1}}
\NewDocumentCommand{\imgmeasure}{m m}{#1\mathoctothorpe #2}
\NewDocumentCommand{\measured}{s o m}{\IfBooleanF{#1}{\,}\IfValueTF{#2}{#3(\symrm{d}#2)}{\symrm{d}#3}}
\NewDocumentCommand{\sigmaalg}{m}{\symscr{#1}}
\NewDocumentCommand{\sigmagen}{m}{\sigma(#1)}
\NewDocumentCommand{\simplefuncs}{m}{\operatorname{SF}(#1)}

% 確率統計
\NewDocumentCommand{\almostsurely}{o o}{\allowbreak\;\IfValueT{#1}{\IfBlankF{#1}{#1\mathhyphen}}\mathrm{a{.}s{.}}\IfValueT{#2}{\;#2}}
\NewDocumentCommand{\expval}{}{\symbb{E}}
\NewDocumentCommand{\prob}{}{\symbb{P}}
\NewDocumentCommand{\variant}{}{\symbb{V}}

\DeclarePairedDelimiterXPP{\condexpval}[1]{\expval}{\lbrack}{\rbrack}{}{\renewcommand{\given}{\SetSymbol[\delimsize]}#1}
\DeclarePairedDelimiterXPP{\condprob}[1]{\prob}{\lparen}{\rparen}{}{\renewcommand{\given}{\SetSymbol[\delimsize]}#1}

% 定数
\NewDocumentCommand{\imat}{}{\mat{I}}
\NewDocumentCommand{\iuni}{}{\symrm{i}}
\NewDocumentCommand{\krez}{}{\symrm{\pi}}
\NewDocumentCommand{\napr}{}{\symrm{e}}
\NewDocumentCommand{\zmat}{}{\mat{O}}
\NewDocumentCommand{\zvec}{}{\vect{0}}
