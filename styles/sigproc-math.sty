\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{sigproc-math}[2022/04/29 sigproc-math]
\RequirePackage{mathtools}
\RequirePackage[group-digits=none]{siunitx}

% 汎用
\newcommand{\holder}{\mathvisiblespace}
\newcommand{\operateur}[1]{\mathop{\kern\z@ #1}\nolimits}
\newcommand{\pholder}{(\holder)}

% 算術・代数
\newcommand{\numset}[1]{\symbb{#1}}
\newcommand{\powerset}[1]{2^{#1}}
\newcommand{\scomp}[1]{#1^{\symrm{c}}}
\newcommand{\sizeof}[1]{\mathoctothorpe #1}

\NewDocumentCommand{\conj}{s m}{\IfBooleanTF{#1}{\overline{#2}}{\bar{#2}}}

\DeclareMathOperator{\ipart}{Im}
\DeclareMathOperator{\rpart}{Re}

\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\bqty}{\lbrack}{\rbrack}
\DeclarePairedDelimiter{\Bqty}{\lbrace}{\rbrace}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiterXPP{\inv}[2]{#1^{-1}}{\lbrack}{\rbrack}{}{#2}
\DeclarePairedDelimiter{\pqty}{\lparen}{\rparen}
\DeclarePairedDelimiterXPP{\ran}[2]{#1}{\lbrack}{\rbrack}{}{#2}
\DeclarePairedDelimiter{\seq}{\lbrace}{\rbrace}

\providecommand{\given}{}
\newcommand{\SetSymbol}[1][]{\nonscript\:#1\vert\allowbreak\nonscript\:\mathopen{}}
\DeclarePairedDelimiterX{\Set}[1]{\lbrace}{\rbrace}{\renewcommand{\given}{\SetSymbol[\delimsize]}#1}

% 線形代数
\newcommand{\basis}[1]{\symcal{#1}}
\newcommand{\htrps}[1]{#1^{\symsfup{H}}}
\newcommand{\rowvect}[1]{({\narrowbaselines\begin{matrix}#1\end{matrix}})}
\newcommand{\kdelta}[2]{\symrm{\delta}_{#1\,#2}}
\newcommand{\mat}[1]{\symbf{#1}}
\newcommand{\matset}[3]{#3^{#1\times #2}}
\newcommand{\midx}[3]{#1_{#2\,#3}}
\newcommand{\pinv}[1]{#1^{\mathord{+}}}
\newcommand{\smallmatrice}[1]{\begin{psmallmatrix}#1\end{psmallmatrix}}
\newcommand{\trps}[1]{#1^{\symsfup{T}}}
\newcommand{\vect}[1]{\symbf{#1}}

\NewDocumentCommand{\pcomp}{o m}{#2^{\mathord{\perp}\IfValueT{#1}{\mid #1}}}

\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\img}{im}
\DeclareMathOperator{\nul}{ker}
\DeclareMathOperator{\proj}{proj}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\spannedby}{span}
\DeclareMathOperator{\spec}{spec}
\DeclareMathOperator{\trace}{tr}

\DeclarePairedDelimiterXPP{\fnorm}[1]{}{\lVert}{\rVert}{_{\symrm{F}}}{#1}
\DeclarePairedDelimiterX{\innerp}[2]{\langle}{\rangle}{#1,#2}
\DeclarePairedDelimiterX{\matrice}[1]{\lparen}{\rparen}{\begin{matrix}#1\end{matrix}}
\DeclarePairedDelimiter{\mnorm}{\lVert}{\rVert}
\DeclarePairedDelimiter{\vnorm}{\lVert}{\rVert}

% 微分積分
\NewDocumentCommand{\intd}{s o m}{\IfBooleanF{#1}{\,}\IfValueTF{#2}{\symrm{d}^#2}{\symrm{d}}#3}

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\order}{o}
\DeclareMathOperator{\Order}{O}

\DeclarePairedDelimiterX{\ccival}[2]{\lbrack}{\rbrack}{#1,#2}
\DeclarePairedDelimiterX{\coival}[2]{\lbrack}{\rparen}{#1,#2}
\DeclarePairedDelimiterX{\ocival}[2]{\lparen}{\rbrack}{#1,#2}
\DeclarePairedDelimiterX{\ooival}[2]{\lparen}{\rparen}{#1,#2}

% 関数解析
\newcommand{\cont}[1]{C^#1}
\newcommand{\lebesgue}[1]{\ell^#1}
\newcommand{\torus}{\symbb{T}}

\NewDocumentCommand{\Lebesgue}{s m}{\IfBooleanTF{#1}{\symcal{L}}{L}^#2}

\DeclareMathOperator{\clsr}{cl}
\DeclareMathOperator*{\sqlim}{l{.}i{.}m{.}}

\DeclarePairedDelimiterXPP{\lpnorm}[2]{}{\lVert}{\rVert}{_{#1}}{#2}
\DeclarePairedDelimiterXPP{\Lpnorm}[2]{}{\lVert}{\rVert}{_{#1}}{#2}
\DeclarePairedDelimiterXPP{\Lpseminorm}[2]{}{\lVert}{\rVert}{_{\Lebesgue*{#1}}}{#2}

% フレーム理論
\newcommand{\synth}[1]{#1^{\mathord{\ast}}}

% フーリエ解析
\newcommand{\circconv}{\ast}
\newcommand{\cycles}[2]{#1^{\numset{Z}/#2}}
\newcommand{\dtft}{\operatorname{\symcal{F}}_{\numset{Z}}}
\newcommand{\fseries}{\operatorname{\symcal{F}}_{\torus}}

\NewDocumentCommand{\dft}{o m}{\operateur{\symcal{F}}_{\IfValueTF{#1}{\numset{Z}^#1}{\numset{Z}}/#2}}

\DeclareRobustCommand{\ftrans}{\operateur{\symcal{F}}}
\DeclareRobustCommand{\lagop}{\operateur{\symit{L}}}
\DeclareRobustCommand{\ltrans}{\operateur{\symcal{L}}}
\DeclareRobustCommand{\ztrans}{\operateur{\symcal{Z}}}

% 測度論
\newcommand{\borelset}[1]{\symcal{B}(#1)}
\newcommand{\extendedreal}{\bar{\numset{R}}}
\newcommand{\indicator}{\symbb{1}}
\newcommand{\imgmeasure}[2]{#1\mathoctothorpe #2}
\newcommand{\sigmaalg}[1]{\symcal{#1}}
\newcommand{\sigmagen}[1]{\sigma(#1)}
\newcommand{\simplefuncs}[1]{\operatorname{SF}(#1)}

\NewDocumentCommand{\almosteverywhere}{o o}{\allowbreak\;\IfValueT{#1}{\IfBlankF{#1}{#1\mathhyphen}}\mathrm{a{.}e{.}}\IfValueT{#2}{\;#2}}
\NewDocumentCommand{\measured}{s o m}{\IfBooleanF{#1}{\,}\IfValueTF{#2}{#3(\symrm{d}#2)}{\symrm{d}#3}}

% 確率統計
\newcommand{\expval}{\symbb{E}}
\newcommand{\prob}{\symbb{P}}
\newcommand{\variant}{\symbb{V}}

\NewDocumentCommand{\almostsurely}{o o}{\allowbreak\;\IfValueT{#1}{\IfBlankF{#1}{#1\mathhyphen}}\mathrm{a{.}s{.}}\IfValueT{#2}{\;#2}}

\DeclarePairedDelimiterXPP{\condexpval}[1]{\expval}{\lbrack}{\rbrack}{}{\renewcommand{\given}{\SetSymbol[\delimsize]}#1}
\DeclarePairedDelimiterXPP{\condprob}[1]{\prob}{\lparen}{\rparen}{}{\renewcommand{\given}{\SetSymbol[\delimsize]}#1}

% 定数
\newcommand{\imat}{\mat{I}}
\newcommand{\iuni}{\symrm{i}}
\newcommand{\krez}{\symrm{\pi}}
\newcommand{\napr}{\symrm{e}}
\newcommand{\zmat}{\mat{O}}
\newcommand{\zvec}{\vect{0}}
